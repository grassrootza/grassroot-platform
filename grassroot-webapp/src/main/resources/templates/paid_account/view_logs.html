<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout">
<head>
  <title>GrassRoot - View Records for Paid Group</title>
</head>
<body>

<div layout:fragment="header">
  <h2><mark><span th:text="${group.groupName}">Group name</span></mark>: logbook of actions recorded</h2>
</div>

<div layout:fragment="overview">
  View records from different month:
  <form th:action="@{/paid_account/group/view}">
    <input type="hidden" name="accountId" th:value="${account.id}" />
    <input type="hidden" name="paidGroupId" th:value="${paidGroupRecord.id}" />
    <select name="monthToView">
      <option th:each="date : ${monthsToView}"
              th:value="${date.getMonthValue() + '-' + date.getYear()}"
              th:text="${date.getMonth().toString() + ' ' + date.getYear()}"
              th:selected="${date == beginDate}">
      </option>
    </select>
    <button type="submit" class="btn-info">Go</button>
  </form>

</div>

<div layout:fragment="content">
  <div layout:fragment="messages"></div>

  <div class="well">
    <div class="row list-group">
      <h4><span th:text="${dateDescription}">date</span></h4>
    </div>
    <div class="row list-group-item">
      <table class="table table-striped">
        <!-- todo: consider privacy concerns & implications for all below -->
        <thead>
        <th>Date held</th>
        <th>Subject</th>
        <th>Location</th>
        <th>Messages sent</th>
        </thead>
        <tbody>
        <tr th:each="meeting : ${meetingsInPeriod}">
          <td><span th:text="${#dates.format(meeting.eventStartDateTime, 'dd MMM yyyy')}">Date time</span></td>
          <td><mark><span th:text="${meeting.name}">Description</span></mark></td>
          <td><span th:text="${meeting.eventLocation}">Due date</span></td>
          <td><!-- todo need a wrapper class for this, also maybe costs --></td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="well">
    <div class="row list-group">
      <h4>Votes in last month:</h4>
    </div>
    <div class="row list-group-item">
      <table class="table table-striped">
        <thead>
        <th>Date closed</th>
        <th>Issue</th>
        <th>Result (% yes)</th>
        <th>Messages sent</th>
        </thead>
        <tbody>
        <tr th:each="vote: ${votesInPeriod}">
          <td><span th:text="${#dates.format(vote.eventStartDateTime, 'dd MMM yyyy')}">Date time closed</span></td>
          <td><mark><span th:text="${vote.name}">Subject</span></mark></td>
          <td><!-- todo : build a wrapper for this --></td>
          <td><!-- todo : likewise, build a wrapper for this --></td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="well">
    <a th:href="@{/paid_account/view(accountId=${account.id})}"><button class="btn-warning">Back to account</button></a>
    <div th:if="${param.monthToView != null}">
      <a th:href="@{/paid_account/group/view(accountId=${account.id}, paidGroupId=${paidGroupRecord.id})}">View last 30 days</a>
    </div>
  </div>

</div>

</body>
</html>